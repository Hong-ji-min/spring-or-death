<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sh.choichanguk.member.model.dao.BoardListMapper">

    <select id="boardAllList" resultMap="memberDtoMap">
        select board_no, b.category_code, category_name, board_title, board_count, created_date
        from member m join board b on m.member_id = b.member_id
        join category c on b.category_code = c.category_code;
    </select>
    <select id="list" resultType="boardDto">
        select *
        from board b join category c on b.category_code = c.category_code;
    </select>


    <resultMap id="memberDtoMap" type="memberDto">
        <!--  id : PK컬럼 매핑용  -->
        <id column="member_id" property="memberId"/>
        <id column="member_name" property="memberName"/>

        <!--  1:N관계의 테이블 행 매핑  -->
        <!--여러 행이 온다-->
        <collection property="boardDtos" ofType="boardDto">
            <id column="board_no" property="boardNo"/>
            <id column="category_code" property="categoryCode"/>
            <result column="category_name" property="categoryName"/>
            <result column="board_title" property="boardTitle"/>
            <result column="board_count" property="boardCount"/>
            <result column="created_date" property="createdDate"/>
        </collection>
    </resultMap>

</mapper>